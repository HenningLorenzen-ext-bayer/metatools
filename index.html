<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enable the Use of Metacore to Help Create and Check Dataset â€¢ metatools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Enable the Use of Metacore to Help Create and Check Dataset">
<meta property="og:description" content="Uses the metadata information stored in metacore to check and build metadata associated columns, such as control terminology.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">metatools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="metatools-">metatools <a href="https://github.com/pharmaverse/metatools" class="external-link"><img src="reference/figures/metatools.png" align="right" style="height:139px;"></a>
<a class="anchor" aria-label="anchor" href="#metatools-"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of metatools is to enable the use of metacore objects. Metatools can be used to build datasets or enhance columns in existing datasets as well as checking datasets against the metadata in metacore.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of metatools from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"metatools"</span><span class="op">)</span></code></pre></div>
<p>And the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"gsk-tech/metatools"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Here is a basic example of some functions to build datasets and create new columns.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/metatools">metatools</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">metacore</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org" class="external-link">haven</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span>
<span class="va">metacore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metacore/man/define_to_MetaCore.html" class="external-link">define_to_metacore</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/metacore/man/metacore_example.html" class="external-link">metacore_example</a></span><span class="op">(</span><span class="st">"ADaM_define.xml"</span><span class="op">)</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/metacore/man/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/metacore/man/select_dataset.html" class="external-link">select_dataset</a></span><span class="op">(</span><span class="st">"ADSL"</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Metadata successfully imported</span>
<span class="co">#&gt; Loading in metacore object with suppressed warnings</span>
<span class="va">ds_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DM <span class="op">=</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/read_xpt.html" class="external-link">read_xpt</a></span><span class="op">(</span><span class="fu"><a href="reference/metatools_example.html">metatools_example</a></span><span class="op">(</span><span class="st">"dm.xpt"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="reference/build_from_derived.html">build_from_derived</a></span><span class="op">(</span><span class="va">metacore</span>, <span class="va">ds_list</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/metacore/man/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># To pull in columns from DM to be in ADSL</span>
   <span class="fu"><a href="reference/create_cat_var.html">create_cat_var</a></span><span class="op">(</span><span class="va">metacore</span>, <span class="va">AGE</span>, <span class="va">AGEGR1</span>, <span class="va">AGEGR1N</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/metacore/man/pipe.html" class="external-link">%&gt;%</a></span> <span class="co">#Add an AGEGR1 and AGEGR1N column</span>
   <span class="fu"><a href="reference/convert_var_to_fct.html">convert_var_to_fct</a></span><span class="op">(</span><span class="va">metacore</span>, <span class="va">ETHNIC</span><span class="op">)</span> <span class="co"># Change ETHNIC to as factor </span>
<span class="co">#&gt; # A tibble: 306 x 15</span>
<span class="co">#&gt;    STUDYID  USUBJID  SUBJID SITEID TRT01P    AGE AGEU  RACE  SEX   ETHNIC  DTHFL</span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;fct&gt;   &lt;chr&gt;</span>
<span class="co">#&gt;  1 CDISCPI~ 01-701-~ 1015   701    Placebo    63 YEARS WHITE F     HISPAN~ ""   </span>
<span class="co">#&gt;  2 CDISCPI~ 01-701-~ 1023   701    Placebo    64 YEARS WHITE M     HISPAN~ ""   </span>
<span class="co">#&gt;  3 CDISCPI~ 01-701-~ 1028   701    Xanome~    71 YEARS WHITE M     NOT HI~ ""   </span>
<span class="co">#&gt;  4 CDISCPI~ 01-701-~ 1033   701    Xanome~    74 YEARS WHITE M     NOT HI~ ""   </span>
<span class="co">#&gt;  5 CDISCPI~ 01-701-~ 1034   701    Xanome~    77 YEARS WHITE F     NOT HI~ ""   </span>
<span class="co">#&gt;  6 CDISCPI~ 01-701-~ 1047   701    Placebo    85 YEARS WHITE F     NOT HI~ ""   </span>
<span class="co">#&gt;  7 CDISCPI~ 01-701-~ 1057   701    Screen~    59 YEARS WHITE F     HISPAN~ ""   </span>
<span class="co">#&gt;  8 CDISCPI~ 01-701-~ 1097   701    Xanome~    68 YEARS WHITE M     NOT HI~ ""   </span>
<span class="co">#&gt;  9 CDISCPI~ 01-701-~ 1111   701    Xanome~    81 YEARS WHITE F     NOT HI~ ""   </span>
<span class="co">#&gt; 10 CDISCPI~ 01-701-~ 1115   701    Xanome~    84 YEARS WHITE M     NOT HI~ ""   </span>
<span class="co">#&gt; # ... with 296 more rows, and 4 more variables: RFSTDTC &lt;chr&gt;, RFENDTC &lt;chr&gt;,</span>
<span class="co">#&gt; #   AGEGR1 &lt;chr&gt;, AGEGR1N &lt;chr&gt;</span></code></pre></div>
<p>Metatools can also be used to run checks</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/read_xpt.html" class="external-link">read_xpt</a></span><span class="op">(</span><span class="fu"><a href="reference/metatools_example.html">metatools_example</a></span><span class="op">(</span><span class="st">"adsl.xpt"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#Checking all values are in the control terminology for just TRT01PN</span>
<span class="fu"><a href="reference/check_ct_col.html">check_ct_col</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">metacore</span>, <span class="va">TRT01PN</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#Checking all values are in the control terminology for all variables </span>
<span class="fu"><a href="reference/check_ct_data.html">check_ct_data</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">metacore</span>, <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co"># Check all variables in the metadata are in the dataset and there aren't any extra columns </span>
<span class="fu"><a href="reference/check_variables.html">check_variables</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">metacore</span><span class="op">)</span>
<span class="co">#&gt; No missing or extra variables</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing metatools</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Christina Fillmore <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-0595-2302" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>GlaxoSmithKline LLC <br><small class="roles"> Copyright holder, funder </small>  </li>
<li>F. Hoffmann-La Roche AG <br><small class="roles"> Copyright holder, funder </small>  </li>
<li>Atorus Research LLC <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/pharmaverse/metatools/actions" class="external-link"><img src="https://github.com/pharmaverse/metatools/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/pharmaverse/metatools" class="external-link"><img src="https://codecov.io/gh/pharmaverse/metatools/branch/main/graph/badge.svg?token=55N5APFLPA" alt="codecov"></a></li>
<li><a href="https://github.com/pharmaverse/metatools/blob/main/LICENSE" class="external-link"><img src="https://img.shields.io/badge/License-MIT-blue.svg"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Christina Fillmore, GlaxoSmithKline LLC, F. Hoffmann-La Roche AG, Atorus Research LLC.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
